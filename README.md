# 🏥 虚拟化标准病人框架 —— 基于 Agent 的临床技能训练系统

> **Virtual Standardized Patient Framework: An AI-Powered Clinical Skill Training System for Medical Students**

---

## 🔍 项目简介

本项目提出了一种**基于智能体（Agent-based）的虚拟化标准病人框架（Virtual Standardized Patient, VSP）**，旨在为医学生提供一个**沉浸式、交互式的临床技能训练平台**。通过模拟真实病人的行为与反应，结合大型语言模型（LLM）的强大理解与生成能力，该系统可支持医学生在多个典型临床场景下进行练习，包括：

- 病史采集（问诊）
- 查体操作
- 辅助检查申请
- 诊断推理
- 治疗决策

系统不仅能够模拟病人与医学生的互动过程，还具备**自动化的评测功能**，对学生的病史采集能力、诊断决策、临床处置、诊疗安全等核心临床能力进行全面评估。

---

## 🎯 项目目标

- 构建一个**智能化、标准化、可扩展**的虚拟病人系统。
- 提供一种**低成本、高效率**的医学教育辅助工具，提升医学生临床技能水平。
- 探索**AI驱动的临床教学模式**的有效性与可行性。
- 验证基于 LLM 的评估机制在临床技能培训中的应用价值。
- 对比 **VSP（虚拟标准病人）与 SP（真实标准病人）之间的语义一致性和交互质量**
- 分析**大模型评分与专业医生评分的一致性**

---

## 🧪 实验设计

为了验证系统的有效性，我们设计并实施了一个为期四周的教学对比实验，并新增了以下两个关键评估维度：

### ✨ 新增评估维度

#### 1️⃣ VSP 与 SP 语义一致性评估

- 收集 **10组由医学生与 VSP 和 SP（真实医生扮演的标准病人）进行的问诊记录**
- 从以下维度进行比较：
  - **语义一致性**：使用 NLP 模型（如 BERTScore、Sentence-BERT）评估两组对话内容的相似度
  - **轮数**：记录每段对话的平均交互轮次
  - **长度**：统计每段对话的字数/词数，分析信息密度

#### 2️⃣ 大模型与专业人员评分一致性分析

- 将上述收集的 10 组问诊记录交由：
  - **大模型（LLM）**
  - **专业医生评审团队**
- 双方按照统一评分标准进行打分，维度包括：
  - 病史采集完整性
  - 诊断逻辑合理性
  - 治疗建议规范性
- 最后分析两者评分的相关性（如皮尔逊相关系数）

---

### 📋 主要实验流程

#### 3.1 参与者招募与分组

- 共招募 **20 名未通过执业临床医师技能实践考试的医学生**
- 所有成员均参加一次线下统一考试，并按成绩从高到低排序
- 使用**插花法**将学生分为两组：
  - **A组（实验组）：10人**，使用本系统进行训练
  - **B组（对照组）：10人**，由专业医生扮演病人进行模拟训练（符合SP考试标准）

#### 3.2 训练安排

- 实验周期：**4周**
- 每周训练频率：每组成员需完成 **5~6次训练任务**
  - A组：系统自动记录训练时长与次数
  - B组：由专业人员手动记录，遵循统一的记录指南

#### 3.3 考试安排

- 在训练完成后组织一次线下统一考试，所有成员再次参加执业临床医师技能实践考试
- 所有考试题目形式一致，难度相近
  - 题目由专业医生审核确认
  - 考官在评分过程中**不知晓考生所属组别**，以确保公正性
- 所有病例均依据**执业临床医师技能实践考试大纲**筛选，涵盖范围与难度保持一致

#### 3.4 主观反馈收集

- 通过**问卷调查**与**访谈**收集以下主观反馈：
  - 学生对训练方式的满意度
  - 对自身临床技能的信心变化
  - 对系统的易用性、实用性评价
  - 对医生扮演 vs. AI模拟的真实感比较

---

## 📊 评估指标与方法

### ✅ 客观评估

| 评估维度 | 描述 |
|----------|------|
| **病史采集能力** | 是否完整、准确地获取关键信息 |
| **诊断决策能力** | 是否做出合理初步诊断与鉴别诊断 |
| **临床处置能力** | 是否正确选择辅助检查、治疗方案 |
| **诊疗安全性意识** | 是否关注患者安全、伦理、沟通等要素 |

- 所有客观评估均由专业考官打分
- 使用**统一评分表**，并进行信度与效度检验

### 📋 主观评估

- 包括但不限于：
  - 满意度（Likert量表）
  - 自我效能感
  - 真实感感知
  - 易用性评价

---

## 🔬 验证方式

我们通过以下方式验证系统的效果与价值：

### 📈 成绩对比分析

- 对比 A 组与 B 组在实验前后考试成绩的变化趋势
- 分析不同训练方式对学生临床技能提升的影响

### 📊 效果显著性检验

- 使用统计方法（如 T 检验）验证两组之间的差异是否具有统计学意义

### 💬 用户反馈分析

- 对主观问卷结果进行量化分析（Likert 量表）
- 对访谈内容进行主题归纳，提炼出关键体验与建议

### 🤖 语义一致性分析

- 使用 NLP 工具评估 VSP 与 SP 之间的语义相似度
- 分析交互轮数、对话长度等数据

### 🧑‍⚕️ 内部评分一致性分析

- 对比 LLM 与医生评委的打分结果
- 分析相关性与一致性（如 ICC、Kappa 系数）

---

## 🛠️ 技术架构（简要）

- **前端**：Web 应用，支持多终端访问
- **后端**：微服务架构，模块化处理用户交互、病例管理、评测逻辑
- **AI 核心**：
  - 基于 LLM 的病人对话引擎
  - 自动评估模块（prompt engineering + rule-based + fine-tuned model）
- **数据存储**：结构化日志记录与学习轨迹追踪
- **安全机制**：权限控制、数据脱敏、隐私保护

---

## 📁 项目目录结构（示例）
